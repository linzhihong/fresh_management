<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="renderer" content="webkit|ie-comp|ie-stand">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<title>信息发布-添加</title>
		<link rel="stylesheet" type="text/css" href="../../css/usermanage_subpage/user_alonesend.css"/>
	</head>
	<body>	
		<article id="app" class="page-container">
			<form class="form form-horizontal" id="form-admin-add">
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>信息类别：</label>
					<div class="formControls col-xs-9 col-sm-10"> 
						<span class="select-box" style="width:150px;">
							<select class="select" name="inforcategory" size="1">
								<option value="-1"></option>
								<option value="1">通知类信息</option>
								<option value="2">提示类信息</option>
								<option value="3">系统类信息</option>
							</select>
						</span> 
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>信息内容：</label>
					<div class="formControls col-xs-9 col-sm-10">
						<textarea name="inforcontent" class="textarea"  placeholder="信息内容..." dragonfly="true"></textarea>
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>发布人：</label>
					<div class="formControls col-xs-9 col-sm-10">
						<span class="input-group" style="width:200px;">
							<input disabled="disabled" type="text" class="input-text" value="" placeholder="" id="publisher" name="publisher">
						</span>
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>接收对象：</label>
					<div class="formControls col-xs-9 col-sm-10"> 
						<span class="select-box" style="width:150px;">
							<select class="select" name="receiver" size="1">
								<option value="-1"></option>
								<option value="1">个人用户</option>
								<option disabled="disabled" value="2">批量用户</option>
							</select>
						</span> 
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>发布渠道1：</label>
					<div class="formControls col-xs-9 col-sm-10"> 
						<div class="check-box">
							<input type="checkbox" id="checkbox-1">
							<label for="checkbox-1">&nbsp;微信&nbsp;渠道</label>
						</div> 
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>发布渠道2：</label>
					<div class="formControls col-xs-9 col-sm-10"> 
						<div class="check-box">
							<input type="checkbox" id="checkbox-2">
							<label for="checkbox-1">&nbsp;106短信&nbsp;渠道</label>
						</div> 
					</div>
				</div>
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2"><span class="c-red">*</span>发布渠道3：</label>
					<div class="formControls col-xs-9 col-sm-10"> 
						<div class="check-box">
							<input type="checkbox" id="checkbox-3">
							<label for="checkbox-1">&nbsp;后台管理平台&nbsp;渠道</label>
						</div> 
					</div>
				</div>				
				<div class="row cl">
					<label class="form-label col-xs-3 col-sm-2">发布时间：</label>
					<div class="formControls col-xs-9 col-sm-10">
						<span class="input-group" style="width:200px;">
							<input type="text" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" id="commentdate" name="commentdate" class="input-text Wdate">
						</span> 
					</div>
				</div>
				<div class="row cl">
					<div class="col-xs-8 col-sm-9 col-xs-offset-3 col-sm-offset-2">
						<input class="btn btn-primary radius" type="submit" value="确认发送">
					</div>
				</div>
			</form>
		</article>
		<script type="text/javascript" src="../../vendor/require/require.js" ></script>
		<script type="text/javascript" src="../../vendor/require-help.js" ></script>
		<script>
			require(['jquery','bootstrap','hui_admin','hui','Vue','jquery_validate','WdatePicker','vue_router'], function ($,bootstrap,hui_admin,hui,Vue,jquery_validate,WdatePicker,vue_router){				
				var vm=new Vue({
					el:'#app',
					data:{
	
					},				
					mounted:function(){
						this.$nextTick(function() {
					      this.init();
					  	})
					},				
					methods:{
						init:function(){							
							console.log(vm.GetQueryString("id"));							
							$("#form-admin-add").validate({
								rules:{
									inforcategory:{
										required:true,
									},		
									inforcontent:{
										required:true,
									},
									publisher:{
										required:true,
									},
									receiver:{
										required:true,
									},
									channel_one:{
										required:true,
									},
									channel_two:{
										required:true,
									},
									channel_three:{
										required:true,
									},
									commentdate:{
										required:true,
									}
								},
								onkeyup:false,
								focusCleanup:true,
								success:"valid",
								submitHandler:function(form){
//									$(form).ajaxSubmit({
//										type: 'post',
//										url: "xxxxxxx" ,
//										success: function(data){
//											layer.msg('添加成功!',{icon:1,time:1000});
//										},
//						                error: function(XmlHttpRequest, textStatus, errorThrown){
//											layer.msg('error!',{icon:1,time:1000});
//										}
//									});
									alert("haha");
									var index = parent.layer.getFrameIndex(window.name);
//									parent.$('.btn-refresh').click();
//									parent.layer.close(index);
									alert(index);
								}
							});
						},						
						GetQueryString:function(name){
						     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
						     var r = window.location.search.substr(1).match(reg);
						     if(r!=null)return  unescape(r[2]); return null;
						}
					}
				});
			})
		</script> 
	</body>
</html>